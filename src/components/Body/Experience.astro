---
import { Image } from 'astro:assets';

interface Props {
    title: string;
    imageSrc: ImageMetadata;
    imageAlt: string;
    company: string;
    period: string;
    description: string[];
}

const { 
    title, 
    imageSrc, 
    imageAlt, 
    company, 
    period, 
    description,
} = Astro.props;
---

<div class="p-8 lg:w-10/12 md:w-10/12 w-full mx-auto bg-surface rounded-xl">
    <div class="flex flex-col md:flex-row gap-8">
      
        <div class="md:w-1/3 flex justify-center items-start">
            <div class="w-full max-w-[200px] rounded-lg overflow-hidden ">
                <Image 
                    src={imageSrc} 
                    alt={imageAlt} 
                    width={200} 
                    height={200} 
                    class="w-full h-auto object-cover"
                />
            </div>
        </div>
        

        <div class="md:w-2/3 space-y-4">
            <h3 class="text-2xl font-bold text-accent">{title}</h3>
            <h3 class="text-xl flex flex-col sm:flex-row sm:justify-between text-accent">
                <span class="font-medium">{company}</span>
                <span>{period}</span>
            </h3>
            
            <div class="text-lg space-y-3">
                {Array.isArray(description) ? (
                    description.map((item) => {
                        // Find text to highlight (numbers, key achievements, and technologies)
                        const highlightedText = item.replace(/\b(\d+%?|\d+\+?)\b|led|spearheaded|developed|built|refactored|migrated|mentored|introduced|reduced|cutting|optimizing|modernized|improved|supported|collaborated|APIs|SaaS|CDN|PHP|Rust|Jira|GitHub|B2B|Europe|DevOps/gi, (match: string) => {
                            return `<span class="text-accent">${match}</span>`;
                        });
                        return <p set:html={highlightedText} />;
                    })
                ) : (
                    <p set:html={description} />
                )}
            </div>
        </div>
    </div>
</div>