---
import { Image } from "astro:assets";
import menuSvg from "../../assets/menu.svg";
import closeSvg from "../../assets/close.svg";
---

<header class="fixed top-0 left-0 right-0 z-50 bg-surface md:hidden">
  <div class="w-full text-xl">
    <div
      class="flex justify-between items-center p-4 px-6 border-b border-accent"
    >
      <span class="font-heading text-accent">Juan Diaz</span>
      <button id="menu-toggle" class="text-text-muted" aria-label="Toggle menu">
        <Image src={menuSvg} alt="Menu" width={24} height={24} />
      </button>
    </div>
  </div>

  <div
    id="mobile-menu"
    class="fixed inset-0 bg-bg/95 z-50 transform translate-x-full transition-transform duration-300 ease-in-out bg-surface"
  >
    <div class="flex flex-col h-full">
      <div
        class="flex justify-between items-center p-4 px-6 border-b border-accent"
      >
        <span class="font-heading text-accent">Juan Diaz</span>
        <button id="close-menu" class="text-text-muted" aria-label="Close menu">
          <Image src={closeSvg} alt="Menu" width={24} height={24} />
        </button>
      </div>
      <nav
        class="flex flex-col items-center justify-center flex-grow gap-6 text-xl text-text-muted"
      >
        <a
          href="#home"
          class="flex items-center gap-3 hover:text-text transition-colors duration-200"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-5 w-5"
          >
            <path d="M3 10.5 12 3l9 7.5"></path>
            <path d="M5 10v10h14V10"></path>
          </svg>
          <span>Home</span>
        </a>

        <a
          href="#stack"
          class="flex items-center gap-3 hover:text-text transition-colors duration-200"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-5 w-5"
          >
            <path d="M12 2l9 5-9 5-9-5 9-5Z"></path>
            <path d="M3 7v10l9 5 9-5V7"></path>
            <path d="M12 12v10"></path>
          </svg>
          <span>Stack</span>
        </a>

        <a
          href="#projects"
          class="flex items-center gap-3 hover:text-text transition-colors duration-200"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-5 w-5"
          >
            <path d="M20 7H4"></path>
            <path d="M20 11H4"></path>
            <path d="M20 15H4"></path>
            <path d="M20 19H4"></path>
            <path d="M8 3h8v4H8z"></path>
          </svg>
          <span>Projects</span>
        </a>

        <a
          href="#about"
          class="flex items-center gap-3 hover:text-text transition-colors duration-200"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-5 w-5"
          >
            <path d="M20 21a8 8 0 0 0-16 0"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span>About Me</span>
        </a>
      </nav>
    </div>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menuToggle = document.getElementById("menu-toggle");
    const closeMenu = document.getElementById("close-menu");
    const mobileMenu = document.getElementById("mobile-menu");

    if (menuToggle && closeMenu && mobileMenu) {
      const closeMobileMenu = () => {
        mobileMenu.classList.add("translate-x-full");
        document.body.classList.remove("overflow-hidden");
      };

      menuToggle.addEventListener("click", () => {
        mobileMenu.classList.remove("translate-x-full");
        document.body.classList.add("overflow-hidden");
      });

      closeMenu.addEventListener("click", closeMobileMenu);

      mobileMenu.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", closeMobileMenu);
      });
    }
  });
</script>
